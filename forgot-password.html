<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è ‚Äî ActiveGo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

<div id="header"></div>
<script type="module" src="header.js"></script>

<div class="container" style="max-width:480px;">

  <h1>–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è</h1>

  <p style="font-size:14px;color:#666;margin-bottom:20px;">
    –í–≤–µ–¥–∏—Ç–µ email, —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.<br>
    –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–º –≤–∞–º —Å—Å—ã–ª–∫—É –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è.
  </p>

  <form id="resetForm">

    <input
      type="email"
      id="email"
      placeholder="Email"
      required
    >
    <br><br>

    <button class="btn" style="width:100%;">
      –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É
    </button>

  </form>

  <div id="result" style="margin-top:16px;"></div>

  <hr style="margin:30px 0;">

  <div style="font-size:14px;color:#666;line-height:1.5;">
    <strong>‚ÑπÔ∏è –í–∞–∂–Ω–æ</strong><br>
    –ï—Å–ª–∏ –≤—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å —á–µ—Ä–µ–∑ <b>Google</b>,<br>
    –≤—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É Google.<br><br>

    –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è —Ä–∞–±–æ—Ç–∞–µ—Ç
    <b>—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤ —Å email + –ø–∞—Ä–æ–ª–µ–º</b>.
  </div>

  <p style="margin-top:20px;font-size:14px;">
    <a href="login.html" style="color:var(--primary);">
      ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫–æ –≤—Ö–æ–¥—É
    </a>
  </p>

</div>

<script type="module">
  import { supabase } from './supabaseClient.js';

  const form = document.getElementById('resetForm');
  const result = document.getElementById('result');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();

    const email = document.getElementById('email').value.trim();

    const { error } = await supabase.auth.resetPasswordForEmail(email, {
      redirectTo: window.location.origin + '/reset-password.html'
    });

    if (error) {
      result.innerHTML = `
        <div style="
          padding:12px;
          background:#fff5f5;
          border:1px solid #fed7d7;
          border-radius:10px;
          font-size:14px;
          color:#c53030;
        ">
          ‚ùå ${error.message}
        </div>
      `;
      return;
    }

    result.innerHTML = `
      <div style="
        padding:12px;
        background:#e6fffa;
        border:1px solid #b2f5ea;
        border-radius:10px;
        font-size:14px;
      ">
        üì© –ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –ø–∏—Å—å–º–æ –Ω–∞ <b>${email}</b><br><br>
        –ü–µ—Ä–µ–π–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ –ø–∏—Å—å–º–µ, —á—Ç–æ–±—ã –∑–∞–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å.
      </div>
    `;
  });
</script>

</body>
</html>
